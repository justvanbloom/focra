{% extends 'base.html' %} 
{% load staticfiles %} 
{% block title %}
{{ crawler.crawlerName }}
{% endblock %} 
{% block body_block %}
<div id="info" class="well well-lg" style="padding: 15px;">
	<div class="page-header form-inline" style="margin:0px">
		<h2>
			{{ crawler.crawlerName | title }} 
			<small>
			{% for seed in crawler.crawlerSeeds %} 
				(<a href="{{seed}}" target="_blank">{{seed}}</a>)
			{% endfor %}
			</small>
		</h2>

		<button id="switchBn" type="button" class="btn btn-success">Start</button>
			
		<button id="pauseBn" type="button" class="btn btn-primary">Pause</button>
		<button id="resumeBn" type="button" class="btn btn-primary">Resume</button>
		<button id="createBabyBn" type="button" class="btn btn-primary">Create
			Baby</button>
		<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#templateModal">Template</button>
		<button type="button" class="btn btn-primary" id="data_tab">Data</button>
		
		{% if crawler.crawlerStatus == 'running' %}
			<button id="deleteBn" class="btn btn-danger" type="submit"
				data-toggle="tooltip" data-placement="top" title="Delete Crawler"
				disabled>Delete Crawler</button>
		{% else %}
			<button id="deleteBn" class="btn btn-danger" type="submit"
				data-toggle="tooltip" data-placement="top" title="Delete Crawler">Delete
						Crawler</button>
		{% endif %}
	
	</div>
<br/>
<ul class="list-inline">
  <li>
  <strong style="font-size:12px">Status:</strong>
  	{% if crawler.crawlerStatus == "running" %}
	<span class="label label-success">{{ crawler.crawlerStatus | title}}</span>
	{% elif crawler.crawlerStatus == "stopped" %}
	<span class="label label-danger">{{ crawler.crawlerStatus | title}}</span>
	{% elif crawler.crawlerStatus == "paused" %}
	<span class="label label-warning">{{ crawler.crawlerStatus | title}}</span>
	{% elif crawler.crawlerStatus == "completed" %}
	<span class="label label-primary">{{ crawler.crawlerStatus | title}}</span>
	{% else %}
	<span class="label label-danger">unknown</span>
	{% endif %}
  </li>
  <li>
  	<strong style="font-size:12px">Pages Crawled:</strong>
   	<span class="badge">{{ crawler.crawled_pages }} pages</span>
  </li>
  <li>
  	<strong style="font-size:12px">Rows Inserted:</strong> 
  	<span class="badge">{{ crawler.rows_inserted }} rows</span>
  </li>
  <li>
  	<strong style="font-size:12px">Time Executed:</strong> 
  	<span class="badge">{{ crawler.time_executed | floatformat:"0" }} seconds</span>
  </li>
  <li>
  	<strong style="font-size:12px">Paginated:</strong>
  	<span class="badge">
	{% if crawler.crawlerPager != "null" %}
		Yes
	{% else %}
		No
	{% endif %}
	</span>
	</li>
</ul>
	
	<div id='selectField' class="btn-group" style="display:none">
		<button type="button" class="btn btn-default">Select Start
			Links From</button>
		
		<button type="button" class="btn btn-default"
			data-toggle="dropdown" aria-expanded="false">
			<span class="caret"></span> <span class="sr-only">Toggle
				Dropdown</span>
		</button>
		
		<ul class="dropdown-menu" role="menu">
			{% for field in fields_w_link %}
			<li><a href="/baby/{{ field }}">{{ field }}</a></li> 
			{% endfor %}
		</ul>
		
		<button id="cancelBabyBn" type="button" class="btn btn-default dropdown" style="cursor: pointer">
			<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
		</button>

	</div>
	
</div>

<div class=" table-responsive">

<table id="crawlerData" class="table table-bordered"
				style="width: 100%">
				<tr>
					{% for key in ordered_template_field.keys %}
					<th class="fields">{{ key }}</th>
					{% endfor %}
				</tr>
			</table>
</div>

<div id="templateModal" class="modal fade ">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">{{ crawler.crawlerName | title}} Template</h4>
      </div>
      <div class="modal-body table-responsive">
        <table class="table table-striped table-bordered">
			{% for key, value in ordered_template_field.items %}
			<tr>
				<td>{{ key }}</td>
				<td>{{ value }}</td>
			</tr>
			{% endfor %}
		</table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

{% endblock %}
